<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="./css/tokens.css">
    <link rel="stylesheet" href="./css/onboarding.css">
  <title>User Information - Farra</title>
</head>

<body>
  <div class="container">
    <div style="display: inline-flex;
padding: 3px;
align-items: center;
gap: 10px; margin-top: 52.50px; margin-left: 1.50px;">
        <a href="./otp.html">
    <svg style="width: 24px; height: 24px;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M22 12.2933C22 11.6436 21.4733 11.1168 20.8235 11.1168L3.17647 11.1168C2.52672 11.1168 2 11.6436 2 12.2933C2 12.943 2.52672 13.4697 3.17647 13.4697L20.8235 13.4697C21.4733 13.4697 22 12.943 22 12.2933Z" fill="#706DF2"/>
  <path d="M9.736 4.14121C10.308 3.83298 11.0215 4.04662 11.3299 4.61862C11.5387 5.00603 11.5079 5.45839 11.2885 5.80592C11.1841 5.97133 11.0368 6.11297 10.8525 6.21239L10.8502 6.21368L10.8379 6.22039L10.7846 6.24968C10.7367 6.27627 10.6648 6.31651 10.5722 6.36945C10.3871 6.47521 10.12 6.63133 9.79847 6.82909C9.15325 7.22603 8.29946 7.78404 7.45157 8.43462C6.59671 9.09051 5.78602 9.81156 5.19973 10.5291C4.59065 11.2745 4.35306 11.8587 4.35306 12.2627C4.35306 12.6674 4.5909 13.2524 5.19993 13.998C5.78623 14.716 6.59692 15.4374 7.45177 16.0936C8.29964 16.7444 9.15342 17.3027 9.79859 17.6997C10.1201 17.8975 10.3872 18.0537 10.5724 18.1596C10.6654 18.2128 10.7587 18.2657 10.8529 18.3168C11.4246 18.6252 11.6381 19.3387 11.3298 19.9104C11.0214 20.4824 10.3078 20.696 9.73589 20.3876C9.62447 20.3275 9.51433 20.265 9.40442 20.2022C9.20037 20.0855 8.91136 19.9164 8.56557 19.7036C7.87624 19.2795 6.9506 18.6751 6.01906 17.96C5.0945 17.2504 4.12578 16.4026 3.37752 15.4864C2.65199 14.598 2.00012 13.4838 2.00012 12.2627C2.00012 11.0419 2.65224 9.92815 3.37771 9.04027C4.12599 8.12451 5.09471 7.27721 6.01926 6.5678C6.95078 5.85309 7.8764 5.24897 8.56573 4.82497C8.91151 4.61227 9.20052 4.44321 9.40457 4.32662C9.50664 4.26827 9.58763 4.22297 9.644 4.19168L9.70977 4.15545L9.728 4.14556L9.7333 4.14274L9.736 4.14121Z" fill="#706DF2"/>
</svg>
</a>

    </div>
    <div class="header">
      <h1 class="title">Let me know more</h1>
      <p class="subtitle">I would appreciate if you give me following info ..., it's safe with me.</p>
    </div>

    <div class="form-container">
      <div class="input-group">
        <span class="input-icon">
          <!-- Ø¢ÛŒÚ©ÙˆÙ† Ù¾ÛŒØ´â€ŒÙØ±Ø¶ -->
         
          <svg class="default-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path d="M7.42432 17.8414C7.42432 16.3495 8.60594 14.4868 11.9952 14.4868C15.3929 14.4868 16.5746 16.3321 16.5746 17.824" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.9189 9.07928C14.9189 10.6922 13.6108 12.0003 11.9978 12.0003C10.3848 12.0003 9.07666 10.6922 9.07666 9.07928C9.07666 7.46523 10.3848 6.1582 11.9978 6.1582C13.6108 6.1582 14.9189 7.46523 14.9189 9.07928Z" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M2 11.5726C2 4.39264 4.5 2 12 2C19.5 2 22 4.39264 22 11.5726C22 18.7516 19.5 21.1453 12 21.1453C4.5 21.1453 2 18.7516 2 11.5726Z" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
          <!-- Ø¢ÛŒÚ©ÙˆÙ† ÙÙˆÚ©ÙˆØ³ -->
        
          <svg class="focose-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path d="M7.42432 17.8414C7.42432 16.3495 8.60594 14.4868 11.9952 14.4868C15.3929 14.4868 16.5746 16.3321 16.5746 17.824" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.9189 9.07928C14.9189 10.6922 13.6108 12.0003 11.9978 12.0003C10.3848 12.0003 9.07666 10.6922 9.07666 9.07928C9.07666 7.46523 10.3848 6.1582 11.9978 6.1582C13.6108 6.1582 14.9189 7.46523 14.9189 9.07928Z" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M2 11.5726C2 4.39264 4.5 2 12 2C19.5 2 22 4.39264 22 11.5726C22 18.7516 19.5 21.1453 12 21.1453C4.5 21.1453 2 18.7516 2 11.5726Z" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
        </span>
        <input type="text" class="input-field" placeholder="Your name" id="name" />
      </div>


      <div class="input-group">
        <span class="input-icon">
          <!-- Ø¢ÛŒÚ©ÙˆÙ† Ù¾ÛŒØ´â€ŒÙØ±Ø¶ -->
         
          <svg class="default-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path opacity="0.4" d="M16.0449 1V4.29084" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path opacity="0.4" d="M7.96631 1V4.29084" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M14.9168 10.4131C14.9168 12.5345 13.5352 14.5036 12.0107 14.5036C10.4863 14.5036 9.08301 12.5345 9.08301 10.4131C9.08301 8.29159 10.5561 7.22559 12.0806 7.22559C13.6051 7.22559 14.9168 8.29159 14.9168 10.4131Z" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M12.1999 14.6406C12.4845 15.1232 12.402 15.738 12.0001 16.1283C11.609 16.5082 11.5191 17.1021 11.7802 17.5806L11.8001 17.6172" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M17.8237 10.1562H17.8348" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M15.4937 17.1274H15.5048" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M7.41455 14.6406H7.42566" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M2 12.5726C2 5.39264 4.5 3 12 3C19.5 3 22 5.39264 22 12.5726C22 19.7516 19.5 22.1453 12 22.1453C4.5 22.1453 2 19.7516 2 12.5726Z" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
          <!-- Ø¢ÛŒÚ©ÙˆÙ† ÙÙˆÚ©ÙˆØ³ -->
          <svg class="focose-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path opacity="0.4" d="M16.0449 1V4.29084" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path opacity="0.4" d="M7.96631 1V4.29084" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M14.9168 10.4131C14.9168 12.5345 13.5352 14.5036 12.0107 14.5036C10.4863 14.5036 9.08301 12.5345 9.08301 10.4131C9.08301 8.29159 10.5561 7.22559 12.0806 7.22559C13.6051 7.22559 14.9168 8.29159 14.9168 10.4131Z" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M12.1999 14.6406C12.4845 15.1232 12.402 15.738 12.0001 16.1283C11.609 16.5082 11.5191 17.1021 11.7802 17.5806L11.8001 17.6172" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M17.8237 10.1562H17.8348" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M15.4937 17.1274H15.5048" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M7.41455 14.6406H7.42566" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M2 12.5726C2 5.39264 4.5 3 12 3C19.5 3 22 5.39264 22 12.5726C22 19.7516 19.5 22.1453 12 22.1453C4.5 22.1453 2 19.7516 2 12.5726Z" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
        </span>
        <input type="number" class="input-field" id="age" placeholder="Age" />
      </div>

      <div class="input-group city-container">
  <div class="city-input" id="cityInput">
    <div class="city-top">
      <!-- Ø¢ÛŒÚ©Ù† Ø³Ù…Øª Ú†Ù¾ -->
      <span class="city-icon-left">
      
        <svg class="default-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M15.1225 10.5674C15.1225 9.03266 13.8788 7.78906 12.3441 7.78906C10.8105 7.78906 9.56689 9.03266 9.56689 10.5674C9.56689 12.101 10.8105 13.3447 12.3441 13.3447C13.8788 13.3447 15.1225 12.101 15.1225 10.5674Z" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.3328 22C9.11276 22 4 16.3986 4 10.4429C4 5.78051 7.73011 2 12.3328 2C16.9354 2 20.6667 5.78051 20.6667 10.4429C20.6667 16.3986 15.5539 22 12.3328 22Z" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
        <svg class="focose-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M15.1225 10.5674C15.1225 9.03266 13.8788 7.78906 12.3441 7.78906C10.8105 7.78906 9.56689 9.03266 9.56689 10.5674C9.56689 12.101 10.8105 13.3447 12.3441 13.3447C13.8788 13.3447 15.1225 12.101 15.1225 10.5674Z" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.3328 22C9.11276 22 4 16.3986 4 10.4429C4 5.78051 7.73011 2 12.3328 2C16.9354 2 20.6667 5.78051 20.6667 10.4429C20.6667 16.3986 15.5539 22 12.3328 22Z" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
        <span class="city-label">City</span>
      </span>

      <!-- Ø¢ÛŒÚ©Ù† Ø³Ù…Øª Ø±Ø§Ø³Øª (ÙÙ„Ø´) -->
      <span class="city-icon-right">
        <svg class="default-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M2 11.5726C2 4.39264 4.5 2 12 2C19.5 2 22 4.39264 22 11.5726C22 18.7516 19.5 21.1453 12 21.1453C4.5 21.1453 2 18.7516 2 11.5726Z" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M8.5 9H15.7292M8.5 14.2089H15.7292" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
        <svg class="focose-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M2 11.5726C2 4.39264 4.5 2 12 2C19.5 2 22 4.39264 22 11.5726C22 18.7516 19.5 21.1453 12 21.1453C4.5 21.1453 2 18.7516 2 11.5726Z" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M8.5 9H15.7292M8.5 14.2089H15.7292" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
      </span>
    </div>

    <!-- Dropdown Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ City -->
    <div class="city-options">
      <div class="city-option" data-city="Baghdad">Baghdad</div>
      <div class="city-option" data-city="Mosul">Mosul</div>
      <div class="city-option" data-city="Basrah">Basrah</div>
      <div class="city-option" data-city="Diyali">Diyali</div>
      <div class="city-option" data-city="Karbala">Karbala</div>
    </div>
  </div>
</div>




      <div class="input-group">
        <span class="input-icon">
          <!-- Ø¢ÛŒÚ©ÙˆÙ† Ù¾ÛŒØ´â€ŒÙØ±Ø¶ -->
          <svg class="default-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path d="M17.8476 8.4751C17.8476 8.4751 14.4771 12.5204 12.0118 12.5204C9.5476 12.5204 6.13916 8.4751 6.13916 8.4751" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M2 11.5726C2 4.39264 4.5 2 12 2C19.5 2 22 4.39264 22 11.5726C22 18.7516 19.5 21.1453 12 21.1453C4.5 21.1453 2 18.7516 2 11.5726Z" stroke="#A9A7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
          <!-- Ø¢ÛŒÚ©ÙˆÙ† ÙÙˆÚ©ÙˆØ³ -->
          <svg class="focose-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path d="M17.8476 8.4751C17.8476 8.4751 14.4771 12.5204 12.0118 12.5204C9.5476 12.5204 6.13916 8.4751 6.13916 8.4751" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M2 11.5726C2 4.39264 4.5 2 12 2C19.5 2 22 4.39264 22 11.5726C22 18.7516 19.5 21.1453 12 21.1453C4.5 21.1453 2 18.7516 2 11.5726Z" stroke="#706DF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
        </span>
        <input type="email" class="input-field" id="email" placeholder="Email" />
      </div>
    </div>

    <button class="continue-btn" id="continueBtn">Continue</button>

    <!-- <p class="footer-text">
            By proceeding, you acknowledge that you have accepted our term of use and privacy policy.
        </p> -->
  </div>
<!-- ğŸš¨ Error Alert -->
<div class="profile-alert error" id="errorAlert">
    <svg style="margin-top: 3.50%;"  xmlns="http://www.w3.org/2000/svg" width="24" height="24"
        viewBox="0 0 24 24" fill="none">
        <path
            d="M11.9732 3C13.2857 7.31246 16.6605 10.6874 20.9728 12C16.6605 13.3126 13.2857 16.6875 11.9732 21C10.6607 16.6875 7.28588 13.3126 2.97363 12C7.28588 10.6874 10.6607 7.31246 11.9732 3Z"
            stroke="#FF595B" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round" />
    </svg>

    <div class="profile-alert-content">
        <div class="profile-alert-title" id="errorTitle">You forgot something!</div>
        <div class="profile-alert-message" id="errorMessage">Please fill all the fields.</div>
    </div>
</div>


<script>
// ========================================
// ğŸ”§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª API
// ========================================
const API_BASE = 'https://microcementazma.com/backend/api';

// ========================================
// ğŸ” Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
// ========================================
const sessionToken = localStorage.getItem('access_token') || localStorage.getItem('session_token');
const userId = localStorage.getItem('user_id');

console.log('ğŸ” Auth Check:', {
    hasToken: !!sessionToken, 
    hasUserId: !!userId,
    token: sessionToken ? sessionToken.substring(0, 20) + '...' : 'null'
});

if (!sessionToken || !userId) {
    console.error('âŒ Auth failed - redirecting to signup');
    alert('Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯');
    window.location.href = './signup.html';
}

// ========================================
// ğŸ¯ Ø¯Ø±ÛŒØ§ÙØª Ø§Ù„Ù…Ù†Øªâ€ŒÙ‡Ø§
// ========================================
const nameInput = document.getElementById('name');
const ageInput = document.getElementById('age');
const emailInput = document.getElementById('email');
const continueBtn = document.getElementById('continueBtn');
const cityContainer = document.querySelector('.city-container');
const cityInputBox = document.getElementById('cityInput');
const cityLabel = cityInputBox.querySelector('.city-label');
const cityOptions = cityInputBox.querySelectorAll('.city-option');

const allInputs = [nameInput, ageInput, emailInput];

// ========================================
// ğŸš¨ Ù†Ù…Ø§ÛŒØ´ Ø®Ø·Ø§
// ========================================
function showError(title, message) {
    const errorAlert = document.getElementById('errorAlert');
    const errorTitle = document.getElementById('errorTitle');
    const errorMessage = document.getElementById('errorMessage');
    
    errorTitle.textContent = title;
    errorMessage.textContent = message;
    errorAlert.classList.add('show');
    
    errorAlert.classList.add('shake');
    setTimeout(() => errorAlert.classList.remove('shake'), 500);
    
    setTimeout(() => {
        errorAlert.classList.remove('show');
    }, 3000);
}

// ========================================
// ğŸ“ Ù…Ø¯ÛŒØ±ÛŒØª Focus/Blur Ø¨Ø±Ø§ÛŒ Input Ù‡Ø§ÛŒ Ø¹Ø§Ø¯ÛŒ
// ========================================
allInputs.forEach(input => {
    input.addEventListener('focus', function() {
        const group = this.closest('.input-group');
        group.classList.add('focused');
        this.classList.remove('focus-border-light');
        this.classList.add('focus-border-strong');
    });

    input.addEventListener('blur', function() {
        const group = this.closest('.input-group');
        if (this.value.trim() === '') {
            group.classList.remove('focused');
            this.classList.remove('focus-border-strong', 'focus-border-light', 'filled');
        } else {
            this.classList.remove('focus-border-strong');
            this.classList.add('focus-border-light', 'filled');
        }
    });
});

// ========================================
// ğŸ™ï¸ Ù…Ø¯ÛŒØ±ÛŒØª City Dropdown
// ========================================
let cityHasValue = false;

cityInputBox.addEventListener('click', (e) => {
    e.stopPropagation();
    
    if (!cityInputBox.classList.contains('expanded')) {
        cityInputBox.classList.add('focused');
        cityInputBox.classList.remove('filled');
    }
    
    cityInputBox.classList.toggle('expanded');
});

document.addEventListener('click', (e) => {
    if (!e.target.closest('.city-container')) {
        cityInputBox.classList.remove('expanded');
        
        if (cityHasValue) {
            cityInputBox.classList.remove('focused');
            cityInputBox.classList.add('filled');
        } else {
            cityInputBox.classList.remove('focused', 'filled');
        }
    }
});

cityOptions.forEach(opt => {
    opt.addEventListener('click', (e) => {
        e.stopPropagation();
        
        const selectedCity = opt.getAttribute('data-city');
        cityLabel.textContent = selectedCity;
        cityContainer.dataset.selected = selectedCity;
        cityHasValue = true;
        
        cityInputBox.classList.remove('expanded');
        cityInputBox.classList.remove('focused');
        cityInputBox.classList.add('filled');
    });
});

// ========================================
// ğŸ”¢ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø³Ù† (1-120)
// ========================================
ageInput.addEventListener('input', function() {
    this.value = this.value.replace(/[^0-9]/g, '');
    
    let value = parseInt(this.value);
    
    if (value < 1) {
        this.value = '';
    }
    if (value > 999) {
        this.value = '999';
    }
});

// ========================================
// ğŸ“§ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø§ÛŒÙ…ÛŒÙ„
// ========================================
emailInput.addEventListener('blur', function() {
    const email = this.value.trim();
    if (email && !email.includes('@')) {
        this.style.borderColor = '#FF3B30';
        setTimeout(() => {
            this.style.borderColor = '';
        }, 2000);
    }
});

// ========================================
// ğŸ“¡ Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ Ø³Ø±ÙˆØ±
// ========================================
async function completeProfile(formData) {
    try {
        console.log('ğŸ”‘ Using token:', sessionToken.substring(0, 30) + '...');
        
        const response = await fetch(`${API_BASE}/user/complete-profile.php`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${sessionToken}`
            },
            body: JSON.stringify(formData)
        });
        
        const result = await response.json();
        console.log('ğŸ“¥ Profile Response:', result);
        return result;
        
    } catch (error) {
        console.error('âŒ Network Error:', error);
        return {
            success: false, 
            message: 'Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±'
        };
    }
}

// ========================================
// ğŸ“¡ Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ Ø³Ø±ÙˆØ±
// ========================================
async function completeProfile(formData) {
    try {
        console.log('ğŸ”‘ Using token:', sessionToken.substring(0, 30) + '...');
        
        const response = await fetch(`${API_BASE}/user/complete-profile.php`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${sessionToken}`
            },
            body: JSON.stringify(formData)
        });
        
        // Ø§Ú¯Ø± Ø³Ø±ÙˆØ± Ù¾Ø§Ø³Ø® Ù†Ø¯Ø§Ø¯ ÛŒØ§ Ø®Ø·Ø§ÛŒ Ø´Ø¨Ú©Ù‡ Ø±Ø® Ø¯Ø§Ø¯
        if (!response.ok) {
            throw new Error('Server connection failed');
        }
        
        const result = await response.json();
        console.log('ğŸ“¥ Profile Response:', result);
        return result;
        
    } catch (error) {
        console.error('âŒ Network Error:', error);
        // Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ±
        return {
            success: false, 
            message: 'server_error' // Ø¹Ù„Ø§Ù…Øª Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ±
        };
    }
}

// ========================================
// ğŸš€ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Continue
// ========================================
continueBtn.addEventListener('click', async function() {
    // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
    const formData = {
        full_name: nameInput.value.trim(),
        age: parseInt(ageInput.value),
        city: cityContainer.dataset.selected || '',
        email: emailInput.value.trim()
    };
    
    // âœ… Ø¨Ø±Ø±Ø³ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ
    if (!formData.full_name || !formData.age || !formData.city || !formData.email) {
        showError('You forgot something!', 'Please fill all the fields.');
        return;
    }
    
    // ğŸš« Ø¨Ø±Ø±Ø³ÛŒ Ø³Ù† Ú©Ù…ØªØ± Ø§Ø² 18
    if (formData.age < 18) {
        showError('You must wait more...', 'Your age is not allowed to use the app.');
        ageInput.focus();
        return;
    }
    
    // ğŸš« Ø¨Ø±Ø±Ø³ÛŒ Ø³Ù† Ø¨Ø§Ù„Ø§ÛŒ 70
    if (formData.age > 70) {
        showError('You\'re too old!', 'Age is unrealistically high!');
        ageInput.focus();
        return;
    }
    
    // âœ… Ø¨Ø±Ø±Ø³ÛŒ ÙØ±Ù…Øª Ø§ÛŒÙ…ÛŒÙ„
    if (!formData.email.includes('@')) {
        showError('Invalid Email!', 'Please enter a valid email address.');
        emailInput.focus();
        return;
    }
    
    console.log('ğŸ“¤ Sending profile data:', formData);
    
    // Ù†Ù…Ø§ÛŒØ´ Ø­Ø§Ù„Øª loading
    const originalText = continueBtn.textContent;
    
    continueBtn.disabled = true;
    continueBtn.style.cursor = 'not-allowed';
    continueBtn.style.opacity = '0.6';
    
    // Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±
    const result = await completeProfile(formData);
    
    if (result.success) {
        console.log('âœ… Profile completed successfully');
        
        localStorage.setItem('profile_completed', 'true');
        
     
        
        setTimeout(() => {
            window.location.href = './wellcom.html';
        }, 800);
        
    } else {
        console.error('âŒ Failed:', result.message);
        
        // ğŸ”¥ Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø§Ø² Ø³Ø±ÙˆØ± Ø¨ÙˆØ¯
        if (result.message === 'server_error') {
            showError('Sorry, Our fault!', 'We couldn\'t connect, please try again!');
        } else {
            // Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø± (Ù…Ø«Ù„ Ø³Ù† Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø² Ø³Ù…Øª Ø³Ø±ÙˆØ±)
            showError('Server Error!', result.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.');
        }
        
        // Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ø¨Ù‡ Ø­Ø§Ù„Øª Ø§ÙˆÙ„ÛŒÙ‡
        continueBtn.textContent = originalText;
        continueBtn.disabled = false;
        continueBtn.style.cursor = 'pointer';
        continueBtn.style.opacity = '1';
    }
});


// ========================================
// âš¡ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Enter Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„
// ========================================
[nameInput, ageInput, emailInput].forEach(input => {
    input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            continueBtn.click();
        }
    });
});

// ========================================
// ğŸ¯ ÙÙˆÚ©ÙˆØ³ Ø§ÙˆÙ„ÛŒÙ‡ Ø±ÙˆÛŒ Ù†Ø§Ù…
// ========================================
window.addEventListener('load', () => {
    nameInput.focus();
});

</script>

</body>

</html>
