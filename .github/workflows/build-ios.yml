   name: Build Cordova iOS App

   on:
     push:
       branches:
         - main

   jobs:
     build:
       runs-on: macos-latest

       steps:
         - name: Checkout code
           uses: actions/checkout@v3

         - name: Set up Node
           uses: actions/setup-node@v3
           with:
             node-version: '18'

         - name: Install Cordova
           run: npm install -g cordova

         - name: Install dependencies
           run: npm install

         - name: Add iOS platform
           run: cordova platform add ios@latest

         - name: Build iOS App
           run: cordova build ios --release

         - name: Archive IPA
           run: |
             mkdir -p release
             cp -R platforms/ios/build/device/*.ipa release/
           shell: bash

         - name: Upload artifact
           uses: actions/upload-artifact@v3
           with:
             name: ios-app
             path: release/*.ipa
